Project healthcare_backend {
  database_type: "PostgreSQL"
}

Table accounts_user {
  id int [pk, increment]
  username varchar(150) [not null]
  email varchar(255) [not null, unique]
  password varchar(255) [not null]

  is_active boolean [not null, default: true]
  is_staff boolean [not null, default: false]
  is_superuser boolean [not null, default: false]

  created_at timestamp
  updated_at timestamp
  date_joined timestamp

  Indexes {
    email [unique]
  }
}

Table patients_patient {
  id int [pk, increment]

  created_by int [not null, ref: > accounts_user.id]

  name varchar(120) [not null]
  age int [not null]
  gender varchar(20) [not null]
  diagnosis text

  created_at timestamp
  updated_at timestamp

  Indexes {
    created_by
    name
  }
}

Table doctors_doctor {
  id int [pk, increment]

  name varchar(120) [not null]
  specialization varchar(120) [not null]
  experience_years int [not null]
  hospital varchar(150)

  created_at timestamp

  Indexes {
    specialization
    name
  }
}

Table mappings_patient_doctor {
  id int [pk, increment]

  patient_id int [not null, ref: > patients_patient.id]
  doctor_id int [not null, ref: > doctors_doctor.id]

  assigned_at timestamp

  Indexes {
    (patient_id, doctor_id) [unique]
    patient_id
    doctor_id
  }
}
